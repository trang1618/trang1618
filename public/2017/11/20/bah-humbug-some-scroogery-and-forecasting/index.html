

<!DOCTYPE html>
<html>


<head>

  <link href="https://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bah! Humbug: Some scRoogery and Forecasting</title>
  <link rel="canonical" href="/2017/11/20/bah-humbug-some-scroogery-and-forecasting/" />

  
  <link rel="stylesheet" href="/assets/css/kube.css" />
  <link rel="stylesheet" href="/assets/css/custom.css" />
  <link rel="stylesheet" href="/assets/css/tufte.css" />

  
  <link href='https://fonts.googleapis.com/css?family=Alegreya:400italic,400,700,700italic&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Alegreya+SC:400&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
  <link href="https://fonts.googleapis.com/css?family=IM+Fell+English:400,400i&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=IM+Fell+English+SC&display=swap" rel="stylesheet">
  <link href="/assets/fonts/fell-flowers/style.css" rel="stylesheet" type="text/css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hack-font@3/build/web/hack-subset.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.0/css/academicons.min.css">
  <link href="/assets/fonts/fontawesome/css/all.css" rel="stylesheet">
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png">
  <link rel="shortcut icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png">
  <link rel="shortcut icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png">
  <link rel="manifest" href="/assets/site.webmanifest">
  <link rel="mask-icon" href="/assets/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#2b5797">
  <meta name="theme-color" content="#ffffff">

  
  

  
  <meta name="description" content="I had to go shopping for a family birthday and new apartment stuff this past weekend. I entered the big, bright department store and froze, with instant regret and dread, because I heard the foreboding sounds of this phenomenon:
Now I don’t know about other countries, but in America the tinsel-laden commercial Christmas season stretches starts the day they break down the pop-up Halloween shops and eventually consumes all of popular culture for two months.
" />

  <meta name="twitter:card" content="summary">
  <meta name="twitter:url" content="/2017/11/20/bah-humbug-some-scroogery-and-forecasting/">
  <meta name="twitter:title" content="Bah! Humbug: Some scRoogery and Forecasting">
  <meta name="twitter:description" content="I had to go shopping for a family birthday and new apartment stuff this past weekend. I entered the big, bright department store and froze, with instant regret and dread, because I heard the foreboding sounds of this phenomenon:
Now I don’t know about other countries, but in America the tinsel-laden commercial Christmas season stretches starts the day they break down the pop-up Halloween shops and eventually consumes all of popular culture for two months.">
  <meta name="twitter:image" content="/assets/img/nr.png">
  <meta name="twitter:site" content="trang1618.github.io">
  <meta name="twitter:creator" content="@trang1618">

  <meta property="og:title" content="Bah! Humbug: Some scRoogery and Forecasting" />
  <meta property="og:locale" content="en_US" />
  <meta property="og:site_name" content="trang1618.github.io" />
  <meta property="og:description" content="  I had to go shopping for a family birthday and new apartment stuff this past weekend. I entered the big, bright department store and froze, with instant regret and dread, because I heard the foreboding sounds of this phenomenon:
Now I don’t know about other countries, but in America the tinsel-laden commercial Christmas season stretches starts the day they break down the pop-up Halloween shops and eventually consumes all of popular culture for two months." />
  <meta property="og:url" content="/2017/11/20/bah-humbug-some-scroogery-and-forecasting/" />
  <script type="application/ld+json">
    {"@type":"WebSite","url":"\/2017\/11\/20\/bah-humbug-some-scroogery-and-forecasting\/","headline":"Bah! Humbug: Some scRoogery and Forecasting", "name":"trang1618.github.io","description":"I had to go shopping for a family birthday and new apartment stuff this past weekend. I entered the big, bright department store and froze, with instant regret and dread, because I heard the foreboding sounds of this phenomenon:\nNow I don’t know about other countries, but in America the tinsel-laden commercial Christmas season stretches starts the day they break down the pop-up Halloween shops and eventually consumes all of popular culture for two months.","@context":"http://schema.org"}
  </script>

  
  
</head>

<body>

<div id="topbar" class="is-hidden-print">
	<div class="wrapper">
		<header>
			<div class="is-navbar-container">
				<nav>
				<div class="is-brand">
					<a href="/">t  r  a  n  g </a>
					<a href="#"
						 class="is-push-right-mobile is-shown-mobile icon-kube-menu"
						 data-kube="toggle"
						 data-target="#navbar-main"></a>
				</div>
				</nav>
				<div id="navbar-main" class="is-navbar is-hidden-mobile is-center-mobile">
					<nav>
						<ul>
						  <li><a href="/vitae">vitae</a></li>
							<li><a href="/blog">blog</a></li>
						
							<li><a href="#connect">say hello</a></li>
						</ul>
					</nav>
				</div>
			</div>
		</header>
	</div>
</div>


<div class="wrapper">
  <div class="is-row is-stack-20">
    <div class="is-col is-10">&nbsp;</div>
    <div class="is-col is-60">
    <h1 class="is-text-center"><a href="">Bah! Humbug: Some scRoogery and Forecasting</a></h1>
    <h4 class="is-bigger is-text-center">November 20, 2017</h4>
    </div>
    <div class="is-col is-30">&nbsp;</div>
  </div>
  <div class="is-row is-stack-20">
  </div>
  <div class="is-row is-stack-20">
    <div class="is-col is-10 is-stack-20">
    </div>
    <div class="is-col is-60">
      <div class="story">
      


<p>I had to go shopping for a family birthday and new apartment stuff this past weekend. I
entered the big, bright department store and froze, with instant regret and dread, because I heard the foreboding sounds of this phenomenon:</p>
<p><img src="ee9.png" /></p>
<p>Now I don’t know about other countries, but in America the tinsel-laden commercial Christmas
season stretches starts the day they break down the pop-up
Halloween shops and eventually consumes all of popular culture for two months. Hearing Mariah Carey’s “All I Want for
Christmas is You” vaguely reminds me of rowing on a river and first hearing
the rush of the waters of a gigantic rapid before I see it and it eventually swallows and flips the boat.</p>
<p>Worried about what the early arrival of the song portended, I sought an
update to Zach Cole’s observation. It turns out that while YouTube’s new layout
hides the “Statistics” button, one can go to the old layout (<code>youtube.com/old/...</code>),
and still find the data. In fact, the raw data is in a hidden table in the page
and is easily grabbed with a little web scrapery:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#2838b0">library</span><span style="color:#888">(</span>tidyverse<span style="color:#888">)</span>
<span style="color:#2838b0">library</span><span style="color:#888">(</span>lubridate<span style="color:#888">)</span>
<span style="color:#2838b0">library</span><span style="color:#888">(</span>stringi<span style="color:#888">)</span>
<span style="color:#2838b0">library</span><span style="color:#888">(</span>noamtools<span style="color:#888">)</span>
<span style="color:#2838b0">library</span><span style="color:#888">(</span>broom<span style="color:#888">)</span>
knitr<span style="color:#666">::</span>opts_chunk<span style="color:#666">$</span>set<span style="color:#888">(</span>cache<span style="color:#666">=</span><span style="color:#444;font-style:italic">TRUE</span><span style="color:#888">)</span></code></pre></div>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#2838b0">library</span><span style="color:#888">(</span>RSelenium<span style="color:#888">)</span>
<span style="color:#2838b0">library</span><span style="color:#888">(</span>rvest<span style="color:#888">)</span>
rD <span style="color:#666">&lt;-</span> rsDriver<span style="color:#888">(</span>browser<span style="color:#666">=</span><span style="color:#b83838">&#34;phantomjs&#34;</span><span style="color:#888">)</span>
remDr <span style="color:#666">&lt;-</span> rD<span style="color:#888">[[</span><span style="color:#b83838">&#34;client&#34;</span><span style="color:#888">]]</span>
remDr<span style="color:#666">$</span>navigate<span style="color:#888">(</span><span style="color:#b83838">&#34;https://www.youtube.com/old/watch?v=yXQViqx6GMY&#34;</span><span style="color:#888">)</span>
morebutton <span style="color:#666">&lt;-</span> remDr<span style="color:#666">$</span>findElement<span style="color:#888">(</span>using<span style="color:#666">=</span><span style="color:#b83838">&#34;xpath&#34;</span><span style="color:#888">,</span>     <span style="color:#b83838">&#39;//*[@id=&#34;action-panel-overflow-button&#34;]&#39;</span><span style="color:#888">)</span>
morebutton<span style="color:#666">$</span>clickElement<span style="color:#888">()</span>
statsbutton <span style="color:#666">&lt;-</span> remDr<span style="color:#666">$</span>findElement<span style="color:#888">(</span>using<span style="color:#666">=</span><span style="color:#b83838">&#34;xpath&#34;</span><span style="color:#888">,</span>     <span style="color:#b83838">&#39;//*[@id=&#34;action-panel-overflow-menu&#34;]/li[2]/button&#39;</span><span style="color:#888">)</span>
statsbutton<span style="color:#666">$</span>clickElement<span style="color:#888">()</span>
tableelem <span style="color:#666">&lt;-</span> remDr<span style="color:#666">$</span>findElement<span style="color:#888">(</span>using<span style="color:#666">=</span><span style="color:#b83838">&#34;xpath&#34;</span><span style="color:#888">,</span>     <span style="color:#b83838">&#39;//*[@id=&#34;watch-actions-stats&#34;]/div[2]/div[2]/div/div[1]/div/div&#39;</span><span style="color:#888">)</span>
tab <span style="color:#666">&lt;-</span> tableelem<span style="color:#666">$</span>getPageSource<span style="color:#888">()</span>
traffic <span style="color:#666">&lt;-</span> read_html<span style="color:#888">(</span>tab<span style="color:#888">[[</span><span style="color:#444">1</span><span style="color:#888">]])</span> <span style="color:#666">%&gt;%</span>
    html_node<span style="color:#888">(</span>xpath <span style="color:#666">=</span> <span style="color:#b83838">&#39;//*[@id=&#34;watch-actions-stats&#34;]/div[2]/div[2]/div/div[1]/div/div/    table&#39;</span><span style="color:#888">)</span> <span style="color:#666">%&gt;%</span>
    html_table<span style="color:#888">()</span> <span style="color:#666">%&gt;%</span>
    rename<span style="color:#888">(</span>date<span style="color:#666">=</span>Date<span style="color:#888">,</span> views<span style="color:#666">=</span>value<span style="color:#888">)</span> <span style="color:#666">%&gt;%</span>
    mutate<span style="color:#888">(</span>date <span style="color:#666">=</span> mdy<span style="color:#888">(</span><span style="color:#2838b0">date</span><span style="color:#888">),</span> views <span style="color:#666">=</span> <span style="color:#2838b0">as.numeric</span><span style="color:#888">(</span>stri_replace_all_fixed<span style="color:#888">(</span>views<span style="color:#888">,</span> <span style="color:#b83838">&#34;,&#34;</span><span style="color:#888">,</span>     <span style="color:#b83838">&#34;&#34;</span><span style="color:#888">)))</span>
write_csv<span style="color:#888">(</span>mc<span style="color:#888">,</span> <span style="color:#b83838">&#34;aiwfciy.csv&#34;</span><span style="color:#888">)</span></code></pre></div>
<p>Sure enough, we are well on our way.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">aiwfciy <span style="color:#666">&lt;-</span> read_csv<span style="color:#888">(</span><span style="color:#b83838">&#34;aiwfciy.csv&#34;</span><span style="color:#888">)</span> <span style="color:#666">%&gt;%</span>
    mutate<span style="color:#888">(</span>date <span style="color:#666">=</span> <span style="color:#2838b0">as.POSIXct</span><span style="color:#888">(</span><span style="color:#2838b0">date</span><span style="color:#888">),</span> yr <span style="color:#666">=</span> year<span style="color:#888">(</span><span style="color:#2838b0">date</span><span style="color:#888">),</span> m <span style="color:#666">=</span> month<span style="color:#888">(</span><span style="color:#2838b0">date</span><span style="color:#888">),</span> d <span style="color:#666">=</span> day<span style="color:#888">(</span><span style="color:#2838b0">date</span><span style="color:#888">),</span> yd <span style="color:#666">=</span> yday<span style="color:#888">(</span><span style="color:#2838b0">date</span><span style="color:#888">))</span>

ggplot<span style="color:#888">(</span>aiwfciy<span style="color:#888">,</span> aes<span style="color:#888">(</span>x<span style="color:#666">=</span><span style="color:#2838b0">date</span><span style="color:#888">,</span> y<span style="color:#666">=</span>views<span style="color:#666">/</span><span style="color:#444">1000000</span><span style="color:#888">,</span> col <span style="color:#666">=</span> <span style="color:#888">(</span>yr <span style="color:#666">==</span> <span style="color:#444">2017</span> <span style="color:#666">&amp;</span> m <span style="color:#666">&gt;=</span> <span style="color:#444">9</span><span style="color:#888">)))</span> <span style="color:#666">+</span>
    scale_x_datetime<span style="color:#888">()</span> <span style="color:#666">+</span>
    geom_line<span style="color:#888">(</span>size<span style="color:#666">=</span><span style="color:#444">1</span><span style="color:#888">)</span> <span style="color:#666">+</span>
    scale_color_manual<span style="color:#888">(</span>values<span style="color:#666">=</span><span style="color:#2838b0;font-style:italic">c</span><span style="color:#888">(</span><span style="color:#b83838">&#34;black&#34;</span><span style="color:#888">,</span> <span style="color:#b83838">&#34;red&#34;</span><span style="color:#888">))</span> <span style="color:#666">+</span>
    theme_nr <span style="color:#666">+</span>
    scale_y_continuous<span style="color:#888">(</span>breaks<span style="color:#666">=</span><span style="color:#444">2</span><span style="color:#666">*</span><span style="color:#888">(</span><span style="color:#444">0</span><span style="color:#666">:</span><span style="color:#444">4</span><span style="color:#888">))</span> <span style="color:#666">+</span>
    theme<span style="color:#888">(</span>axis.title.x<span style="color:#666">=</span>element_blank<span style="color:#888">(),</span> legend.position <span style="color:#666">=</span> <span style="color:#b83838">&#34;none&#34;</span><span style="color:#888">)</span> <span style="color:#666">+</span>
    labs<span style="color:#888">(</span>y <span style="color:#666">=</span> <span style="color:#b83838">&#34;Views (millions)&#34;</span><span style="color:#888">,</span> title<span style="color:#666">=</span><span style="color:#b83838">&#39;Daily YouTube views of Mariah Carey\&#39;s\n&#34;All I Want for Christmas is You&#34;&#39;</span><span style="color:#888">)</span></code></pre></div>
<p><img src="/musings/2017-11-20-data-driven-scroogery/index_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<p>To me, each of these spikes feels like this:</p>
<p><img src="https://i.makeagif.com/media/11-26-2015/e3e-W5.gif" /></p>
<p>I’m leaving the country for this week, so I’ll be spared a bit of
it, but <em>how much will I hear this song in December?</em></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">cc <span style="color:#666">&lt;-</span> aiwfciy <span style="color:#666">%&gt;%</span>
    filter<span style="color:#888">(</span>yr <span style="color:#666">!=</span><span style="color:#444">2009</span><span style="color:#888">)</span> <span style="color:#666">%&gt;%</span>
    group_by<span style="color:#888">(</span>yr<span style="color:#888">)</span> <span style="color:#666">%&gt;%</span>
    summarize<span style="color:#888">(</span>dec_views <span style="color:#666">=</span> <span style="color:#2838b0">sum</span><span style="color:#888">(</span>views<span style="color:#888">[</span>m<span style="color:#666">==</span><span style="color:#444">12</span><span style="color:#888">]),</span>
              early_nov_views <span style="color:#666">=</span> <span style="color:#2838b0">sum</span><span style="color:#888">(</span>views<span style="color:#888">[</span>m<span style="color:#666">==</span><span style="color:#444">11</span> <span style="color:#666">&amp;</span> d <span style="color:#666">&lt;=</span><span style="color:#444">15</span><span style="color:#888">]))</span>

ggplot<span style="color:#888">(</span>filter<span style="color:#888">(</span>cc<span style="color:#888">,</span> yr <span style="color:#666">!=</span> <span style="color:#444">2017</span><span style="color:#888">),</span> aes<span style="color:#888">(</span>x <span style="color:#666">=</span> <span style="color:#2838b0">as.factor</span><span style="color:#888">(</span>yr<span style="color:#888">),</span> y<span style="color:#666">=</span>dec_views<span style="color:#666">/</span><span style="color:#444">1e6</span><span style="color:#888">))</span> <span style="color:#666">+</span>
    geom_col<span style="color:#888">()</span> <span style="color:#666">+</span>
    labs<span style="color:#888">(</span>y <span style="color:#666">=</span> <span style="color:#b83838">&#34;Views (millions)&#34;</span><span style="color:#888">,</span> title<span style="color:#666">=</span><span style="color:#b83838">&#39;December YouTube views of Mariah Carey\&#39;s\n&#34;All I Want for Christmas is You&#34;&#39;</span><span style="color:#888">)</span> <span style="color:#666">+</span>
    theme_nr <span style="color:#666">+</span>
    theme<span style="color:#888">(</span>axis.title.x<span style="color:#666">=</span>element_blank<span style="color:#888">())</span></code></pre></div>
<p><img src="/musings/2017-11-20-data-driven-scroogery/index_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>Scarily, views appear to have approximately doubled every year for the past
five years. If we fit an exponential growth model like <span class="math inline">\(\text{XmasCheer}(t) = e^{\lambda t}\)</span>,
we get this:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">expmod <span style="color:#666">&lt;-</span> lm<span style="color:#888">(</span><span style="color:#2838b0">log</span><span style="color:#888">(</span>dec_views<span style="color:#888">)</span> <span style="color:#666">~</span> yr<span style="color:#888">,</span> data<span style="color:#666">=</span>filter<span style="color:#888">(</span>cc<span style="color:#888">,</span> yr <span style="color:#666">!=</span> <span style="color:#444">2017</span><span style="color:#888">))</span>
cc <span style="color:#666">&lt;-</span> cc <span style="color:#666">%&gt;%</span>
    mutate<span style="color:#888">(</span>prediction <span style="color:#666">=</span> <span style="color:#2838b0">as.double</span><span style="color:#888">(</span><span style="color:#2838b0">exp</span><span style="color:#888">(</span>predict<span style="color:#888">(</span>expmod<span style="color:#888">,</span> newdata<span style="color:#666">=</span>cc<span style="color:#888">))))</span> <span style="color:#666">%&gt;%</span>
    mutate<span style="color:#888">(</span>forecast <span style="color:#666">=</span> yr <span style="color:#666">==</span> <span style="color:#444">2017</span><span style="color:#888">,</span>
           dec_views <span style="color:#666">=</span> if_else<span style="color:#888">(</span>forecast<span style="color:#888">,</span> prediction<span style="color:#888">,</span> dec_views<span style="color:#888">))</span>

ggplot<span style="color:#888">(</span>cc<span style="color:#888">,</span> aes<span style="color:#888">(</span>x <span style="color:#666">=</span> yr<span style="color:#888">,</span> y<span style="color:#666">=</span>dec_views<span style="color:#666">/</span><span style="color:#444">1e6</span><span style="color:#888">))</span> <span style="color:#666">+</span>
    geom_col<span style="color:#888">(</span>mapping<span style="color:#666">=</span>aes<span style="color:#888">(</span>fill<span style="color:#666">=</span>forecast<span style="color:#888">))</span> <span style="color:#666">+</span>
    geom_line<span style="color:#888">(</span>mapping<span style="color:#666">=</span>aes<span style="color:#888">(</span>x <span style="color:#666">=</span> yr<span style="color:#888">,</span> y<span style="color:#666">=</span>prediction<span style="color:#666">/</span><span style="color:#444">1e6</span><span style="color:#888">),</span> size<span style="color:#666">=</span><span style="color:#444">1</span><span style="color:#888">,</span> col<span style="color:#666">=</span><span style="color:#b83838">&#34;black&#34;</span><span style="color:#888">)</span> <span style="color:#666">+</span>
    geom_point<span style="color:#888">(</span>mapping<span style="color:#666">=</span>aes<span style="color:#888">(</span>x <span style="color:#666">=</span> yr<span style="color:#888">,</span> y<span style="color:#666">=</span>prediction<span style="color:#666">/</span><span style="color:#444">1e6</span><span style="color:#888">),</span> size<span style="color:#666">=</span><span style="color:#444">2</span><span style="color:#888">,</span> col<span style="color:#666">=</span><span style="color:#b83838">&#34;black&#34;</span><span style="color:#888">)</span> <span style="color:#666">+</span>
    scale_x_continuous<span style="color:#888">(</span>breaks<span style="color:#666">=</span><span style="color:#444">2010</span><span style="color:#666">:</span><span style="color:#444">2018</span><span style="color:#888">)</span> <span style="color:#666">+</span>
    scale_y_continuous<span style="color:#888">(</span>breaks <span style="color:#666">=</span> <span style="color:#2838b0">seq</span><span style="color:#888">(</span><span style="color:#444">0</span><span style="color:#888">,</span><span style="color:#444">100</span><span style="color:#888">,</span>by<span style="color:#666">=</span><span style="color:#444">20</span><span style="color:#888">))</span> <span style="color:#666">+</span>
    scale_fill_manual<span style="color:#888">(</span>values <span style="color:#666">=</span> <span style="color:#2838b0;font-style:italic">c</span><span style="color:#888">(</span><span style="color:#b83838">&#34;grey40&#34;</span><span style="color:#888">,</span> <span style="color:#b83838">&#34;red&#34;</span><span style="color:#888">))</span> <span style="color:#666">+</span>
    labs<span style="color:#888">(</span>y <span style="color:#666">=</span> <span style="color:#b83838">&#34;Views (millions)&#34;</span><span style="color:#888">,</span> title<span style="color:#666">=</span><span style="color:#b83838">&#39;December YouTube views of Mariah Carey\&#39;s\n&#34;All I Want for Christmas is You&#34;&#39;</span><span style="color:#888">)</span> <span style="color:#666">+</span>
    theme_nr <span style="color:#666">+</span>
    theme<span style="color:#888">(</span>axis.title.x<span style="color:#666">=</span>element_blank<span style="color:#888">(),</span> legend.position <span style="color:#666">=</span> <span style="color:#b83838">&#34;none&#34;</span><span style="color:#888">)</span></code></pre></div>
<p><img src="/musings/2017-11-20-data-driven-scroogery/index_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>Not bad, though it seems to have <em>underestimated</em> last year’s views by a fair bit,
which could actually result in an underestimate this year, too. Based on this model, views will grow ~49% every year and exceed the human population in another 12 years.</p>
<p>As an ecologist, I can thankfully point to a body of theory showing exponential
growth is often checked by other mechanisms. For instance, fish consumption of eggs and juveniles limits growth in the Ricker Model, resource limitation can check populations or
sometimes environmentally driven stochasticity knocks them back. That is, I can hope this
will all collapse into cannibalism, land war or a lucky supervolcano eruption.</p>
<p>Ecologists have a habit of getting things wrong applying ecological models to
social processes, though. The <em>Limits to Growth</em> crowd underestimated capitalism’s
ability to turn ever more human ingenuity towards its gaping maw. So
rather than apply any of these mechanisms, let’s take a one-step-ahead approach
and see what last weekend’s shopping experience tells us about what’s to come.</p>
<p>It turns out there is a very good correlation between views in the first two
weeks of November and the size of the beast in December:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">lmod <span style="color:#666">&lt;-</span> lm<span style="color:#888">(</span><span style="color:#2838b0">log10</span><span style="color:#888">(</span>dec_views<span style="color:#888">)</span> <span style="color:#666">~</span> <span style="color:#2838b0">log10</span><span style="color:#888">(</span>early_nov_views<span style="color:#888">),</span> data <span style="color:#666">=</span> filter<span style="color:#888">(</span>cc<span style="color:#888">,</span> yr <span style="color:#666">!=</span> <span style="color:#444">2017</span><span style="color:#888">))</span>
<span style="color:#2838b0">summary</span><span style="color:#888">(</span>lmod<span style="color:#888">)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = log10(dec_views) ~ log10(early_nov_views), data = filter(cc, 
##     yr != 2017))
## 
## Residuals:
##        1        2        3        4        5        6        7 
##  0.09587 -0.01354 -0.12408  0.02629  0.01385 -0.01249  0.01409 
## 
## Coefficients:
##                        Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)             1.40399    0.43093   3.258   0.0225 *  
## log10(early_nov_views)  0.95212    0.07022  13.559 3.91e-05 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.07212 on 5 degrees of freedom
## Multiple R-squared:  0.9735, Adjusted R-squared:  0.9682 
## F-statistic: 183.8 on 1 and 5 DF,  p-value: 3.91e-05</code></pre>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">ggplot<span style="color:#888">(</span>filter<span style="color:#888">(</span>cc<span style="color:#888">,</span> yr <span style="color:#666">!=</span> <span style="color:#444">2017</span><span style="color:#888">),</span> aes<span style="color:#888">(</span>x <span style="color:#666">=</span> <span style="color:#2838b0">log10</span><span style="color:#888">(</span>early_nov_views<span style="color:#888">),</span> y <span style="color:#666">=</span> <span style="color:#2838b0">log10</span><span style="color:#888">(</span>dec_views<span style="color:#888">)))</span> <span style="color:#666">+</span>
    geom_smooth<span style="color:#888">(</span>method<span style="color:#666">=</span>lm<span style="color:#888">)</span> <span style="color:#666">+</span>
    geom_point<span style="color:#888">()</span> <span style="color:#666">+</span>
    theme_nr <span style="color:#666">+</span> theme<span style="color:#888">(</span>panel.grid.major.x <span style="color:#666">=</span> element_line<span style="color:#888">(</span>color<span style="color:#666">=</span><span style="color:#b83838">&#34;grey10&#34;</span><span style="color:#888">,</span> size<span style="color:#666">=</span><span style="color:#444">0.5</span><span style="color:#888">),</span>
                     panel.grid.major.y <span style="color:#666">=</span> element_line<span style="color:#888">(</span>color<span style="color:#666">=</span><span style="color:#b83838">&#34;grey10&#34;</span><span style="color:#888">,</span> size<span style="color:#666">=</span><span style="color:#444">0.25</span><span style="color:#888">))</span> <span style="color:#666">+</span>
    labs<span style="color:#888">(</span>title <span style="color:#666">=</span> <span style="color:#b83838">&#34;Correlation Between WAY EARLY November views\nand just excessive December views&#34;</span><span style="color:#888">,</span>
         x <span style="color:#666">=</span> <span style="color:#b83838">&#34;log10(Total views in the first half of November)&#34;</span><span style="color:#888">,</span>
         y <span style="color:#666">=</span> <span style="color:#b83838">&#34;log10(Total views in December)&#34;</span><span style="color:#888">)</span></code></pre></div>
<p><img src="/musings/2017-11-20-data-driven-scroogery/index_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>With this, we can make an alternative projection:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">cc <span style="color:#666">&lt;-</span> cc <span style="color:#666">%&gt;%</span>
    mutate<span style="color:#888">(</span>pred2 <span style="color:#666">=</span> <span style="color:#2838b0">as.double</span><span style="color:#888">(</span><span style="color:#444">10</span><span style="color:#666">^</span>predict<span style="color:#888">(</span>lmod<span style="color:#888">,</span> newdata<span style="color:#666">=</span>cc<span style="color:#888">)),</span>
           dec_views <span style="color:#666">=</span> if_else<span style="color:#888">(</span>forecast<span style="color:#888">,</span> pred2<span style="color:#888">,</span> dec_views<span style="color:#888">))</span>

ggplot<span style="color:#888">(</span>cc<span style="color:#888">,</span> aes<span style="color:#888">(</span>x <span style="color:#666">=</span> yr<span style="color:#888">,</span> y<span style="color:#666">=</span>dec_views<span style="color:#666">/</span><span style="color:#444">1e6</span><span style="color:#888">))</span> <span style="color:#666">+</span>
    geom_col<span style="color:#888">(</span>mapping<span style="color:#666">=</span>aes<span style="color:#888">(</span>fill<span style="color:#666">=</span>forecast<span style="color:#888">))</span> <span style="color:#666">+</span>
    geom_line<span style="color:#888">(</span>mapping<span style="color:#666">=</span>aes<span style="color:#888">(</span>x <span style="color:#666">=</span> yr<span style="color:#888">,</span> y<span style="color:#666">=</span>pred2<span style="color:#666">/</span><span style="color:#444">1e6</span><span style="color:#888">),</span> size<span style="color:#666">=</span><span style="color:#444">1</span><span style="color:#888">,</span> col<span style="color:#666">=</span><span style="color:#b83838">&#34;black&#34;</span><span style="color:#888">)</span> <span style="color:#666">+</span>
    geom_point<span style="color:#888">(</span>mapping<span style="color:#666">=</span>aes<span style="color:#888">(</span>x <span style="color:#666">=</span> yr<span style="color:#888">,</span> y<span style="color:#666">=</span>pred2<span style="color:#666">/</span><span style="color:#444">1e6</span><span style="color:#888">),</span> size<span style="color:#666">=</span><span style="color:#444">2</span><span style="color:#888">,</span> col<span style="color:#666">=</span><span style="color:#b83838">&#34;black&#34;</span><span style="color:#888">)</span> <span style="color:#666">+</span>
    scale_x_continuous<span style="color:#888">(</span>breaks<span style="color:#666">=</span><span style="color:#444">2010</span><span style="color:#666">:</span><span style="color:#444">2018</span><span style="color:#888">)</span> <span style="color:#666">+</span>
    scale_y_continuous<span style="color:#888">(</span>breaks <span style="color:#666">=</span> <span style="color:#2838b0">seq</span><span style="color:#888">(</span><span style="color:#444">0</span><span style="color:#888">,</span><span style="color:#444">100</span><span style="color:#888">,</span>by<span style="color:#666">=</span><span style="color:#444">20</span><span style="color:#888">))</span> <span style="color:#666">+</span>
    labs<span style="color:#888">(</span>y <span style="color:#666">=</span> <span style="color:#b83838">&#34;Views (millions)&#34;</span><span style="color:#888">,</span> title<span style="color:#666">=</span><span style="color:#b83838">&#39;December YouTube views of Mariah Carey\&#39;s\n&#34;All I Want for Christmas is You&#34;&#39;</span><span style="color:#888">)</span> <span style="color:#666">+</span>
    scale_fill_manual<span style="color:#888">(</span>values <span style="color:#666">=</span> <span style="color:#2838b0;font-style:italic">c</span><span style="color:#888">(</span><span style="color:#b83838">&#34;grey40&#34;</span><span style="color:#888">,</span> <span style="color:#b83838">&#34;red&#34;</span><span style="color:#888">))</span> <span style="color:#666">+</span>
    theme_nr <span style="color:#666">+</span>
    theme<span style="color:#888">(</span>axis.title.x<span style="color:#666">=</span>element_blank<span style="color:#888">(),</span> legend.position <span style="color:#666">=</span> <span style="color:#b83838">&#34;none&#34;</span><span style="color:#888">)</span></code></pre></div>
<p><img src="/musings/2017-11-20-data-driven-scroogery/index_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>We get almost the same result! Though maybe, just maybe, the flood has lost some momentum this year.</p>
<p>Happy Holidays.</p>

      </div>
      <hr>
      
      <a href="/2017/09/19/learning-and-teaching-the-eleventh-of-twelve-things-i-love-about-philosophical-logic/"><span class="pointer">2</span>&nbsp;Learning and Teaching (the eleventh of twelve things I love about philosophical logic)</a> |
      
      <a href="/blog">All posts</a>
      
      | <a href="/2017/12/30/community-the-twelfth-of-twelve-things-i-love-about-philosophical-logic/">Community (the twelfth of twelve things I love about philosophical logic)&nbsp;<span class="pointer">1</span></a>
      
    </div>
    <div class="is-col is-30"></div>

  </div>
</div>



<footer id="footer" class="is-hidden-print">
  <div class="wrapper">
    <div class="is-row .is-small is-muted">
      <div class="is-col is-33">
        <h3>About</h3>
        <em>
          <p>This is my personal website. Nothing here is endorsed by my employer or organizations I am part of.</p>
          <p>Content on this site is released under a
            <a href="https://creativecommons.org/licenses/by/4.0/legalcode">CC-BY 4.0 license.</a>
            Source code of the site is provided under the <a href="https://opensource.org/licenses/MIT">MIT license</a>
            and may be reused without restriction.</p>
          <p>Huge thanks to <a href="https://www.noamross.net/">Noam Ross</a> for the beautifully designed website and detailed instruction on how to built it <a href="https://www.noamross.net/2019/08/09/a-new-website/">here</a>.</p>
        </em>
      </div>
      <div class="is-col is-33">
        <h3 id="connect">Say hello</h3>
        <ul class="fa-ul">
          <li><i class="fa-li fas fa-briefcase fa-fw"></i>3700 Hamilton Walk, D207, Philadelphia, PA 19104</li>
          <li><a href="https://orcid.org/0000-0003-3737-6565"><i class="fa-li ai ai-orcid"></i></a><a href="https://orcid.org/0000-0003-3737-6565">0000-0003-3737-6565</a></li>
          <li><a href="https://scholar.google.com/citations?user=OMpJVfsAAAAJ&hl=en"><i class="fa-li ai ai-google-scholar"></i></a><a href="https://scholar.google.com/citations?user=OMpJVfsAAAAJ">Google Scholar</a></li>
          <li><a href="https://twitter.com/trang1618"><i class="fa-li fab fa-twitter fa-fw"></i></a><a href="https://twitter.com/trang1618">@trang1618</a></li>
          <li><a href="https://github.com/trang1618"><i class="fa-li fab fa-github fa-fw"></i></a><a href="https://github.com/trang1618">github.com/trang1618</a>
          <li><a href="https://slides.com/trang1618"><i class="fa-li fas fa-object-ungroup fa-fw"></i></a><a href="https://slides.com/trang1618">slides.com/trang1618</a>
        </ul>
      </div>
      <div class="is-col is-33">
        <h3 id="subscribe">Subscribe</h3>
        <em><p>Follow me on Twitter at <a href="https://twitter.com/trang1618">@trang1618</a> where I'll update you if anything is posted.</p></em>
        <h3 id="search">Search</h3>
        <nav class="is-push-right is-left-mobile" class="is-hidden-mobile">
					<form method="get" action="https://duckduckgo.com/">
      <input type="search" name="q" maxlength="255" placeholder="Search on site">
      <input type="hidden" name="sites" value="www.trang1618.github.io" />
      <input type="hidden" name="ka" value="Alegreya" />
      <input type="hidden" name="k7" value="#faf8f8" />
      <input type="hidden" name="kj" value="#b33" />
      <input type="hidden" name="ky" value="#fafafa" />
      <input type="hidden" name="kx" value="b" />
      <input type="hidden" name="ko" value="-1" />
      <input type="hidden" name="k1" value="-1" />
      <input type="hidden" name="kt" value="Alegreya Sans" />
</form>
				</nav>
      </div>
    </div>
  </div>
</footer>

<script type="text/javascript" src="/assets/js/kube.js"></script>
<script>
  $K.dom(window).on('load', $K.init);
</script>


</body>
</html>
