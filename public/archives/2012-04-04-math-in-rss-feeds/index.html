
<!DOCTYPE html>
<html>


<head>

  <link href="https://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Displaying Math in RSS feeds</title>
  <link rel="canonical" href="/archives/2012-04-04-math-in-rss-feeds/" />

  
  <link rel="stylesheet" href="/assets/css/kube.css" />
  <link rel="stylesheet" href="/assets/css/custom.css" />
  <link rel="stylesheet" href="/assets/css/tufte.css" />

  
  <link href='https://fonts.googleapis.com/css?family=Alegreya:400italic,400,700,700italic&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Alegreya+SC:400&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
  <link href="https://fonts.googleapis.com/css?family=IM+Fell+English:400,400i&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=IM+Fell+English+SC&display=swap" rel="stylesheet">
  <link href="/assets/fonts/fell-flowers/style.css" rel="stylesheet" type="text/css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hack-font@3/build/web/hack-subset.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.0/css/academicons.min.css">
  <link href="/assets/fonts/fontawesome/css/all.css" rel="stylesheet">
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png">
  <link rel="shortcut icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png">
  <link rel="shortcut icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png">
  <link rel="manifest" href="/assets/site.webmanifest">
  <link rel="mask-icon" href="/assets/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#2b5797">
  <meta name="theme-color" content="#ffffff">

  
  

  
  <meta name="description" content="The equations in this blog are rendered using [MathJax](http://www.mathjax.org), which creates beautiful math from $\LaTeX$-style markup. However, the math doesn&#39;t appear in RSS feeds, because RSS doesn&#39;t allow Javascript. While I have a total of 12 RSS followers, this is how my closest collaborators, and my most math-y readers, are likely to read my posts, so I&#39;ve been looking for a way to produce readable equations in the RSS feed.
" />

  <meta name="twitter:card" content="summary">
  <meta name="twitter:url" content="/archives/2012-04-04-math-in-rss-feeds/">
  <meta name="twitter:title" content="Displaying Math in RSS feeds">
  <meta name="twitter:description" content="The equations in this blog are rendered using [MathJax](http://www.mathjax.org), which creates beautiful math from $\LaTeX$-style markup. However, the math doesn&#39;t appear in RSS feeds, because RSS doesn&#39;t allow Javascript. While I have a total of 12 RSS followers, this is how my closest collaborators, and my most math-y readers, are likely to read my posts, so I&#39;ve been looking for a way to produce readable equations in the RSS feed.">
  <meta name="twitter:image" content="/assets/img/nr.png">
  <meta name="twitter:site" content="trang1618.github.io">
  <meta name="twitter:creator" content="@trang1618">

  <meta property="og:title" content="Displaying Math in RSS feeds" />
  <meta property="og:locale" content="en_US" />
  <meta property="og:site_name" content="trang1618.github.io" />
  <meta property="og:description" content="  The equations in this blog are rendered using [MathJax](http://www.mathjax.org), which creates beautiful math from $\LaTeX$-style markup. However, the math doesn&#39;t appear in RSS feeds, because RSS doesn&#39;t allow Javascript. While I have a total of 12 RSS followers, this is how my closest collaborators, and my most math-y readers, are likely to read my posts, so I&#39;ve been looking for a way to produce readable equations in the RSS feed." />
  <meta property="og:url" content="/archives/2012-04-04-math-in-rss-feeds/" />
  <script type="application/ld+json">
    {"@type":"WebSite","url":"\/archives\/2012-04-04-math-in-rss-feeds\/","headline":"Displaying Math in RSS feeds", "name":"trang1618.github.io","description":"The equations in this blog are rendered using [MathJax](http:\/\/www.mathjax.org), which creates beautiful math from $\\LaTeX$-style markup. However, the math doesn\x27t appear in RSS feeds, because RSS doesn\x27t allow Javascript. While I have a total of 12 RSS followers, this is how my closest collaborators, and my most math-y readers, are likely to read my posts, so I\x27ve been looking for a way to produce readable equations in the RSS feed.","@context":"http://schema.org"}
  </script>

  
  
</head>

<body>

<div id="topbar" class="is-hidden-print">
	<div class="wrapper">
		<header>
			<div class="is-navbar-container">
				<nav>
				<div class="is-brand">
					<a href="/">t  r  a  n  g </a>
					<a href="#"
						 class="is-push-right-mobile is-shown-mobile icon-kube-menu"
						 data-kube="toggle"
						 data-target="#navbar-main"></a>
				</div>
				</nav>
				<div id="navbar-main" class="is-navbar is-hidden-mobile is-center-mobile">
					<nav>
						<ul>
							<li><a href="/blog">blog</a></li>
						
							<li><a href="/vitae">vitae</a></li>
							<li><a href="#connect">connect</a></li>
						</ul>
					</nav>
				</div>
			</div>
		</header>
	</div>
</div>


<div class="wrapper">
  <div class="is-row is-stack-20">
    <div class="is-col is-10">&nbsp;</div>
    <div class="is-col is-60">
    <h1 class="is-text-center"><a href="">Displaying Math in RSS feeds</a></h1>
    <h4 class="is-bigger is-text-center">April 4, 2012</h4>
    </div>
    <div class="is-col is-30">&nbsp;</div>
  </div>
  <div class="is-row is-stack-20">
  </div>
  <div class="is-row is-stack-20">
    <div class="is-col is-10 dateblock is-stack-20">
    </div>
    <div class="is-col is-60">
      <div class="story">
       


The equations in this blog are rendered using
[MathJax](http://www.mathjax.org), which creates beautiful math from
$\LaTeX$-style markup. However, the math doesn't appear in RSS feeds,
because RSS doesn't allow Javascript. While I have a total of 12 RSS
followers, this is how my closest collaborators, and my most math-y
readers, are likely to read my posts, so I've been looking for a way to
produce readable equations in the RSS feed.

Since I switched producing my website with
[Jekyll](http://github.com/mojombo/jekyll), I have access to the RSS-XML
file itself. I realized I could post-process this to make the math
readable by replacing MathJax with images.

[Codecogs](www.codecogs.com/latex/eqneditor.php) can produce image files
from $\LaTeX$-style math just by calling a URL. To use this on a
website, the format is:

~~~~ {.html}
<img src="http://latex.codecogs.com/png.latex?SOME LATEX" alt="SOME LATEX" />
~~~~

or, for inline equations

~~~~ {.html}
<img src="http://latex.codecogs.com/png.latex?\inline SOME LATEX" alt="\inline SOME LATEX" />
~~~~

The `alt=` means that the raw $\LaTeX$ should show up in the RSS feed if
images fail or are slow to render. Now, for XML, these need to be
modified slightly for forbidden characters (`<>&'"`).

~~~~ {.xml}
&lt;img src=&quot;http://latex.codecogs.com/png.latex?SOME LATEX&quot; alt=&quot;SOME LATEX1&quot; /&gt;
&lt;img src=&quot;http://latex.codecogs.com/png.latex?\inline SOME LATEX&quot; alt=&quot;SOME LATEX&quot; /&gt;
~~~~

Forbidden characters are already converted in the $\LaTeX$ equations
themselves, because they've gone through Jekyll's `xml_escape` function.
Also, I want inline equations to be vertically centered, so I add
`style="vertical-align:middle"` for the inline equations.

I now need to search the Jekyll-produce-XML file for equations, which
are contained by `\[` and `\]`, or `\(` and `\)`, and replace them with
the codecogs call. (Of course, the previous sentence will cause an error
here). Normally I'd use 'sed', but the regular expression is a bit
complicated for it, so I use perl instead:

~~~~ {.bash}
perl -pi -e 's|(\\\[)(.*?)(\\\])|&lt;img src=&quot;http://latex.codecogs.com/png.latex?\2&quot; alt=&quot;\2&quot; /&gt;|g' _site/blog/*.xml
perl -pi -e 's|(\\\()(.*?)(\\\))|&lt;img style=&quot;vertical-align:middle&quot; src=&quot;http://latex.codecogs.com/png.latex?\\inline \2&quot; alt=&quot;\2&quot; /&gt;|g' _site/blog/*.xml
~~~~

These commands do the replacement on all the XML files in the directory,
so if I have multiple RSS feeds it will handle them all.

Now equations like this: $x^2$, and below should display in RSS!:

$$\frac{dK}{dt} = \delta \left(\frac{P_t h_t - TC^I_t - \pi^I_t}{K_t}\right)$$

The only thing to remember is that display equations need to be
separated by multiple line breaks, or they will display side by side in
RSS.

This is sort an inelegant hack and only works if you are running jekyll
locally, but someone could potentially write a jekyll extension so you
could include something like
`{{ "{{post.content | xml_escape | math_in_rss "}}}}` in your RSS
template.

**Update (April 6, 2012)**: Per Christian's suggestion, I've wrapped the
display equations in `div` tags so they center and each have a separate
line. The script now looks like this:

~~~~ {.sh}
perl -pi -e 's|(\\\[)(.*?)(\\\])|&lt;div style=&quot;text-align:center;&quot;&gt;&lt;img src=&quot;http://latex.codecogs.com/png.latex?\2&quot; alt=&quot;\2&quot; /&gt;&lt;/div&gt;|g' _site/blog/*.xml
perl -pi -e 's|(\\\()(.*?)(\\\))|&lt;img style=&quot;vertical-align:middle&quot; src=&quot;http://latex.codecogs.com/png.latex?\\inline \2&quot; alt=&quot;\2&quot; /&gt;|g' _site/blog/*.xml
~~~~

      </div>
      <hr>
      
      <a href="/archives/2012-04-03-tuesday-april-3/"> &larr;&nbsp;Week 1 readings for ARE277</a> |
      
      <a href="//blog/#2012">All posts</a>
      
      | <a href="/archives/2012-04-04-are277-guest-lecture-from-jim-wilen/">ARE277: Guest Lecture from Jim Wilen&nbsp;&rarr;</a>
      
    </div>
    <div class="is-col is-30"></div>

  </div>
</div>



<footer id="footer" class="is-hidden-print">
  <div class="wrapper">
    <div class="is-row .is-small is-muted">
      <div class="is-col is-33">
        <h3>About</h3>
        <em>
          <p>This is my personal website. Nothing here is endorsed by my employer or organizations I am part of.</p>
          <p>Content on this site is released under a
            <a href="https://creativecommons.org/licenses/by/4.0/legalcode">CC-BY 4.0 license.</a>
            Source code of the site is provided under the <a href="https://opensource.org/licenses/MIT">MIT license</a>
            and may be reused without restriction.</p>
          <p>Huge thanks to Noam Ross for the beautifully designed website and detailed instruction on how to built it <a href="https://www.noamross.net/2019/08/09/a-new-website/">here</a>.</p>
        </em>
      </div>
      <div class="is-col is-33">
        <h3 id="connect">Connect</h3>
        <ul class="fa-ul">
          <li><i class="fa-li fas fa-briefcase fa-fw"></i>3700 Hamilton Walk, Philadelphia, PA 19104</li>
          <li><i class="fa-li fas fa-envelope fa-fw"></i><a href="mailto:grixor@gmail.com">grixor@gmail.com</a></li>
          <li><a href="https://orcid.org/0000-0003-3737-6565"><i class="fa-li ai ai-orcid"></i></a><a href="https://orcid.org/0000-0003-3737-6565">0000-0003-3737-6565</a></li>
          <li><a href="https://scholar.google.com/citations?user=OMpJVfsAAAAJ&hl=en"><i class="fa-li ai ai-google-scholar"></i></a><a href="https://scholar.google.com/citations?user=OMpJVfsAAAAJ">Google Scholar</a></li>
          <li><a href="https://twitter.com/trang1618"><i class="fa-li fab fa-twitter fa-fw"></i></a><a href="https://twitter.com/trang1618">@trang1618</a></li>
          <li><a href="https://github.com/trang1618"><i class="fa-li fab fa-github fa-fw"></i></a><a href="https://github.com/trang1618">github.com/trang1618</a>
          <li><a href="https://slides.com/trang1618"><i class="fa-li fas fa-object-ungroup fa-fw"></i></a><a href="https://slides.com/trang1618">slides.com/trang1618</a>
        </ul>
      </div>
      <div class="is-col is-33">
        <h3 id="subscribe">Subscribe</h3>
        <em><p>Follow me on Twitter at <a href="https://twitter.com/trang1618">@trang1618</a> where I'll update you if anything is posted.</p></em>
        <h3 id="search">Search</h3>
        <nav class="is-push-right is-left-mobile" class="is-hidden-mobile">
					<form method="get" action="https://duckduckgo.com/">
      <input type="search" name="q" maxlength="255" placeholder="Search on site">
      <input type="hidden" name="sites" value="www.trang1618.github.io" />
      <input type="hidden" name="ka" value="Alegreya" />
      <input type="hidden" name="k7" value="#faf8f8" />
      <input type="hidden" name="kj" value="#b33" />
      <input type="hidden" name="ky" value="#fafafa" />
      <input type="hidden" name="kx" value="b" />
      <input type="hidden" name="ko" value="-1" />
      <input type="hidden" name="k1" value="-1" />
      <input type="hidden" name="kt" value="Alegreya Sans" />
</form>
				</nav>
      </div>
    </div>
  </div>
</footer>

<script type="text/javascript" src="/assets/js/kube.js"></script>
<script>
  $K.dom(window).on('load', $K.init);
</script>


</body>
</html>
